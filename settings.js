(()=>{"use strict";var e={2:(e,t,i)=>{i.d(t,{A:()=>g});var o=i(601),r=i.n(o),n=i(314),a=i.n(n),s=i(417),c=i.n(s),l=new URL(i(874),i.b),d=new URL(i(520),i.b),m=new URL(i(77),i.b),h=a()(r()),v=c()(l),f=c()(d),p=c()(m);h.push([e.id,`@font-face{font-family:Roboto;src:local(Roboto),url(${v}) format("woff2");font-weight:400;font-style:normal}@font-face{font-family:Merriweather;src:local(Merriweather),url(${f}) format("woff2");font-weight:400;font-style:normal}@font-face{font-family:"Open Sans";src:local("Open Sans"),url(${p}) format("woff2")}.full-screen{width:100%;height:100%;margin:0;padding:0;overflow:hidden}@media(orientation: portrait){html{font-size:x-large}}body{background-color:#000;font-family:Roboto,sans-serif;color:#fff}#header{position:absolute;top:0;width:100%;left:0}header{box-sizing:border-box;width:100%;padding:1rem;display:flex}header .header-title{margin-top:0;margin-bottom:0;flex:1;font-size:1.5rem}nav{display:flex}nav>:not(:last-child){margin-right:.5rem}label,input,details,button{cursor:pointer}#new-tab-link,.toggle-label{background-color:rgba(0,0,0,0);outline:none;border:none;display:flex;justify-content:center;align-items:center;height:2rem;width:2rem}#new-tab-link .toggle,.toggle-label .toggle{position:absolute;left:0;opacity:0}#new-tab-link:has(.toggle:checked) .only-closed,.toggle-label:has(.toggle:checked) .only-closed{display:none}#new-tab-link:not(:has(.toggle:checked)) .only-open,.toggle-label:not(:has(.toggle:checked)) .only-open{display:none}body:has(#history-toggle:checked) #foreground{transform:translateY(8rem)}body:has(#history-toggle:checked) #foreground .scrollable{overflow-y:hidden}.slides{transition:transform 400ms cubic-bezier(0.28, 0.83, 0.67, 1);will-change:transform}@keyframes fadein{0%{opacity:0}100%{opacity:1}}#backdrop{animation:fadein 1s}#backdrop-image{position:absolute;object-fit:cover;top:0;left:0;width:100%;height:100%}body:has(#darken:checked) #backdrop-image{filter:brightness(65%)}body:has(#blur:checked) #backdrop-image{top:-5px;left:-5px;width:calc(100% + 10px);height:calc(100% + 10px);filter:blur(5px)}body:has(#darken:checked):has(#blur:checked) #backdrop-image{filter:blur(5px) brightness(65%)}body:has(#spoiler-visibility-click:checked) #review-text.contains-spoiler:not(.clicked){cursor:pointer;filter:blur(10px);position:relative}body:has(#spoiler-visibility-hide:checked) #review-text.contains-spoiler,body:not(:has(#show-movie-name:checked)) #movie-name,body:not(:has(#show-movie-release-year:checked)) #movie-year,body:not(:has(#show-movie-poster:checked)) #movie-link,body:not(:has(#show-review-date:checked)) #review-link,body:not(:has(#show-review-stars:checked)) #review-stars,body:not(:has(#show-review-rewatch:checked)) #review-rewatch,body:not(:has(#show-review-heart:checked)) #review-heart,body:not(:has(#show-review-tags:checked)) #tags,body:has(#movie-details-visibility-hide:checked) #movie-info-container,body:has(#review-details-visibility-hide:checked) #review-metadata,body:has(#menu-visibility-hide:checked) #header{display:none !important}body:has(#menu-visibility-hover:checked) #header,body:has(#review-details-visibility-hover:checked) #review-metadata,body:has(#movie-details-visibility-hover:checked) #movie-info-container{opacity:0}body:not(.ui-active):has(#menu-visibility-hover:checked) #header,body:not(.ui-active):has(#review-details-visibility-hover:checked) #review-metadata,body:not(.ui-active):has(#movie-details-visibility-hover:checked) #movie-info-container{pointer-events:none}body.ui-interacted:has(#menu-visibility-hover:checked) #header,body.ui-interacted:has(#review-details-visibility-hover:checked) #review-metadata,body.ui-interacted:has(#movie-details-visibility-hover:checked) #movie-info-container{transition:opacity .25s ease-in}body.ui-active:has(#menu-visibility-hover:checked) #header,body.ui-active:has(#review-details-visibility-hover:checked) #review-metadata,body.ui-active:has(#movie-details-visibility-hover:checked) #movie-info-container{opacity:1;transition:opacity .25s ease-out}body:has(#review-position-center:checked) #review{justify-content:safe center;align-items:safe center}body:has(#review-position-center-left:checked) #review{align-items:safe center}body:has(#review-position-bottom-left:checked) #review{align-items:end}#foreground{position:relative;background-color:#000}#foreground #review{position:absolute;width:100%;height:100%;display:flex}#foreground #review #review-contents{margin:4rem}@media(orientation: landscape){#foreground #review #review-contents{max-width:60%}}#foreground #review #review-contents #review-link{color:#989898;display:inline-block}#foreground #review #review-contents #review-text{font-family:Merriweather,serif;font-size:3rem;margin-bottom:.1rem;margin-top:0;white-space:pre-wrap}#foreground #review #review-contents #review-metadata{color:#989898;width:fit-content;font-size:1rem}#foreground #review #review-contents #review-metadata p{margin:0}#foreground #review #review-contents #review-metadata #review-heart{font-size:.9rem}#foreground #review #review-contents #tags{font-size:.8rem;display:inline-flex;flex-wrap:wrap}#foreground #review #review-contents #tags:not(:has(.tag)){display:none}#foreground #review #review-contents #tags .tag{padding-left:.2rem;padding-right:.2rem;border:1px solid;white-space:nowrap;border-radius:.2rem 0 .2rem .2rem;margin-bottom:.3rem;color:#989898;text-decoration:none}#foreground #review #review-contents #tags :not(:last-child).tag{margin-right:.4rem}#foreground #movie-info-container{position:absolute;bottom:0;right:0;margin-bottom:1rem;margin-right:1rem;display:flex;color:#fff}#foreground #movie-info-container #poster{aspect-ratio:2/3;object-fit:cover;height:10rem;border-radius:.2rem}#foreground #movie-info-container #movie-info{align-self:flex-end;margin-right:1rem;bottom:0;text-align:right;margin-bottom:.8rem}#foreground #movie-info-container #movie-info #movie-name{font-size:1rem;margin-bottom:0;color:#fff}#foreground #movie-info-container #movie-info #movie-year{font-size:.8125rem;margin-top:.5rem;margin-bottom:0}#history{top:0;left:0;position:fixed;width:100%;height:8rem;background-color:#000;display:flex}@media(orientation: portrait){#history .history-item:nth-child(n+7){display:none}}#history .history-item{background-color:#1a1a1a;flex:1;margin-top:.2rem;margin-bottom:.2rem;display:flex;justify-content:center;align-items:center;position:relative}#history .history-item.history-placeholder .history-item-image,#history .history-item.history-placeholder .history-title-container{display:none}#history .history-item:not(.history-placeholder){cursor:pointer}#history .history-item:not(.history-placeholder) svg{display:none}#history .history-item img{object-fit:cover;width:100%;height:100%}#history .history-item:not(:hover) .history-title-container{display:none}#history .history-item .history-title-container{color:#fff;position:absolute;left:0;bottom:0;width:100%;background-color:rgba(26,26,26,.6);overflow:hidden;text-wrap:nowrap;padding:.3rem 0 .3rem .3rem;box-sizing:border-box}#history .history-item .history-title-container span{width:100%;display:block;mask-image:linear-gradient(to right, black calc(100% - 1rem), transparent calc(100% - 0.1rem))}#history .history-item svg{fill:#313131}#history .history-item:not(:first-child){margin-left:.2rem}body:has(#settings-toggle:checked) #exitable-settings-container{transform:none;opacity:1}body.ui-interacted #exitable-settings-container{transition:transform 250ms ease-in-out,opacity 200ms ease-in-out}#exitable-settings-container{will-change:opacity,transform;transform-origin:calc(100% - 2rem) 2rem;transform:scale(0);opacity:0;width:16rem;position:absolute;top:0;right:0;margin:.5rem;max-height:calc(100% - 1rem)}.fixed-settings{width:16rem}.settings{font-family:"Open Sans",sans-serif;background-color:#2d2d2d;display:flex;flex-direction:column;border-radius:.2rem}.settings a{color:#fff}.settings #settings-contents{padding:0 1rem 1rem 1rem;display:flex;flex-direction:column}.settings #settings-contents .settings-group+.settings-group{margin-top:.5rem}.settings #settings-contents .details-contents{will-change:max-height;transition:max-height .4s ease-in-out;max-height:0;overflow:hidden;height:fit-content}.settings #settings-contents details[open]+.details-contents{max-height:70rem}.settings #settings-contents .settings-section{border-left:1px solid #484848;margin-left:.3rem;padding-left:.5rem;border-bottom-left-radius:.15rem}.settings #settings-contents li{display:flex;align-items:baseline}.settings #settings-contents li label{display:block}.settings #settings-contents ul{list-style-type:none}.settings #settings-contents ul,.settings #settings-contents p{margin:0}.settings #settings-contents hr{width:100%;border-width:0;border-top:1px solid #484848}.settings #settings-contents button{margin:3px 3px 0 5px;display:inline;padding:0;border:0;font:inherit;background:rgba(0,0,0,0);color:currentColor;-webkit-appearance:none}.hidden-until-ready,.online-only{opacity:1;transition:opacity 1s cubic-bezier(0.28, 0.83, 0.67, 1)}body.offline .online-only,.hidden-until-ready:not(.ready){pointer-events:none;opacity:0}body.offline .online-only{display:none}.scrollable{overflow:scroll}.download-links{margin:.5rem 0 .5rem .5rem;display:flex;align-items:center;justify-items:center}.download-links>*:not(:last-child){margin-right:1rem}.bobs-club-group{display:flex;flex-direction:column;align-items:center;font-size:.7rem}.bobs-club-group a:has(svg){text-decoration:none}.bobs-club-group svg{width:1rem}@media screen and (prefers-reduced-motion: reduce){*{transition:none !important;animation:none !important}}`,""]);const g=h},56:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function i(e){for(var i=-1,o=0;o<t.length;o++)if(t[o].identifier===e){i=o;break}return i}function o(e,o){for(var n={},a=[],s=0;s<e.length;s++){var c=e[s],l=o.base?c[0]+o.base:c[0],d=n[l]||0,m="".concat(l," ").concat(d);n[l]=d+1;var h=i(m),v={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(v);else{var f=r(v,o);o.byIndex=s,t.splice(s,0,{identifier:m,updater:f,references:1})}a.push(m)}return a}function r(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,r){var n=o(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<n.length;a++){var s=i(n[a]);t[s].references--}for(var c=o(e,r),l=0;l<n.length;l++){var d=i(n[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}n=c}}},77:(e,t,i)=>{e.exports=i.p+"feb0d8644aca3df9fabf.woff2"},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",o=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),o&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),o&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,o,r,n){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);o&&a[d[0]]||(void 0!==n&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=n),i&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=i):d[2]=i),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},520:(e,t,i)=>{e.exports=i.p+"a2f222a5eb500111991a.woff2"},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,i){var o=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(i)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var o="";i.supports&&(o+="@supports (".concat(i.supports,") {")),i.media&&(o+="@media ".concat(i.media," {"));var r=void 0!==i.layer;r&&(o+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),o+=i.css,r&&(o+="}"),i.media&&(o+="}"),i.supports&&(o+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},874:(e,t,i)=>{e.exports=i.p+"df1be0be92f6f19b8115.woff2"}},t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var n=t[o]={id:o,exports:{}};return e[o](n,n.exports,i),n.exports}i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.p="",i.b=document.baseURI||self.location.href,i.nc=void 0;var o=i(72),r=i.n(o),n=i(825),a=i.n(n),s=i(659),c=i.n(s),l=i(56),d=i.n(l),m=i(540),h=i.n(m),v=i(113),f=i.n(v),p=i(2),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=c().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=h(),r()(p.A,g),p.A&&p.A.locals&&p.A.locals;const u={backdrop:["backdrop",HTMLDivElement],backdropImage:["backdrop-image",HTMLImageElement],poster:["poster",HTMLImageElement],movieInfoContainer:["movie-info-container",HTMLDivElement],movieName:["movie-name",HTMLAnchorElement],movieYear:["movie-year",HTMLParagraphElement],movieLink:["movie-link",HTMLAnchorElement],reviewContents:["review-contents",HTMLDivElement],reviewLink:["review-link",HTMLAnchorElement],reviewText:["review-text",HTMLParagraphElement],reviewDate:["review-date",HTMLSpanElement],reviewStars:["review-stars",HTMLSpanElement],reviewHeart:["review-heart",HTMLSpanElement],reviewRewatch:["review-rewatch",HTMLSpanElement],reviewContainer:["review",HTMLDivElement],tags:["tags",HTMLDivElement],history:["history",HTMLDivElement],historyToggle:["history-toggle",HTMLInputElement],settingsToggle:["settings-toggle",HTMLInputElement],settingsContents:["settings-contents",HTMLDivElement],clearHistory:["clear-history",HTMLButtonElement],main:["main",HTMLDivElement]};let y=null;const b=()=>{if(null===y){const e=Object.entries(u).map((([e,[t]])=>[e,document.getElementById(t)])),t=Array.from(document.querySelectorAll("#settings-contents input"));y=Object.assign(Object.assign({},Object.fromEntries(e)),{settings:Object.fromEntries(t.map((e=>[e.id,e])))})}return y};var w=function(e,t,i,o){return new(i||(i=Promise))((function(r,n){function a(e){try{c(o.next(e))}catch(e){n(e)}}function s(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};const k=(()=>{{const e=(e,t)=>w(void 0,void 0,void 0,(function*(){const i=JSON.stringify(t);return void 0!==i&&localStorage.setItem(e,i),t})),t=(t,i)=>w(void 0,void 0,void 0,(function*(){const o=localStorage.getItem(t);return null===o?e(t,i):JSON.parse(o)}));return{set:e,get:t}}})(),A=((new Date).toLocaleDateString(void 0,{month:"numeric",year:"numeric",day:"numeric"}),(e,t)=>{var i;const o=e.cloneNode(!0);return null===(i=e.parentNode)||void 0===i||i.replaceChild(o,e),((e,t)=>{if(t){const i=e.querySelector(".history-item-image");i&&(i.alt=t.movie.title,t.movie.backdrop||t.movie.poster?(i.src=t.movie.backdrop||t.movie.poster,i.addEventListener("load",(()=>i.classList.add("ready")))):(i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=",i.classList.add("ready")));const o=e.querySelector(".history-title");o&&(o.innerText=t.movie.title),e.addEventListener("click",(()=>(e=>{const t=b();t.movieName.innerText=e.movie.title,t.movieYear.innerText=String(e.movie.year),t.reviewText.classList.toggle("contains-spoiler",e.spoiler),t.reviewText.innerText=e.text,t.reviewLink.href=e.url,t.reviewDate.innerText=new Date(e.year,e.month-1,e.day).toLocaleDateString(void 0,{month:"long",year:"numeric",day:"numeric"}),t.reviewStars.innerText=(e=>{if(null===e)return"";const t=Math.floor(e),i="★".repeat(t);return e>t?i+"½":i})(e.rating),t.reviewHeart.innerText=e.heart?"♥":"",t.reviewRewatch.innerText=e.rewatch?"⟲":"",t.tags.innerHTML="";for(const i of e.tags){const e=document.createElement("a");e.innerText=i.text,e.href=i.url,e.title=`${i.text} on letterboxd`,e.classList.add("tag"),t.tags.append(e)}e.movie.backdrop?(t.backdropImage.src=e.movie.backdrop,t.backdropImage.alt=e.movie.title,t.backdropImage.addEventListener("load",(()=>t.backdropImage.classList.add("ready")),{once:!0,passive:!0})):(t.backdropImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=",t.backdropImage.classList.add("ready")),t.reviewContents.classList.add("ready"),t.poster.alt=e.movie.title,e.movie.poster?(t.poster.src=e.movie.poster,t.poster.addEventListener("load",(()=>t.poster.classList.add("ready")),{once:!0,passive:!0})):(t.poster.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=",t.poster.classList.add("ready")),t.movieLink.href=e.movie.url,t.movieName.href=e.movie.url,t.movieInfoContainer.classList.add("ready")})(t)),{passive:!0}),e.classList.remove("history-placeholder")}else e.classList.add("history-placeholder")})(o,t)}),x=()=>k.set("history",[]).then((()=>(e=>{var t;const i=b(),o=i.history.children.length;for(let r=0;r<o;r++){const o=i.history.children.item(r),n=e[r];o&&A(o,null!==(t=null==n?void 0:n.review)&&void 0!==t?t:null)}})([])));chrome.runtime.onMessage.addListener((e=>{switch(e.type){case"clear":return void x();case"updated":return void C(e.settings);default:return e}}));const L=e=>{chrome.runtime.sendMessage(e)};var E=function(e,t,i,o){return new(i||(i=Promise))((function(r,n){function a(e){try{c(o.next(e))}catch(e){n(e)}}function s(e){try{c(o.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))};const T="settings",M={"filter-movies-backdrop":!0,"filter-movies-posters":!0,"frequency-refresh":!0,blur:!0,darken:!0,"spoiler-visibility-click":!0,"movie-details-visibility-show":!0,"show-movie-name":!0,"show-movie-release-year":!0,"show-movie-poster":!0,"menu-visibility-hover":!0,"review-details-visibility-show":!0,"show-review-stars":!0,"show-review-heart":!0,"show-review-rewatch":!0,"show-review-tags":!0,"show-review-date":!0,"review-position-center":!0},S=e=>k.set(T,e),C=e=>S(e).then((()=>I(e))),H=()=>b().settings,I=e=>E(void 0,void 0,void 0,(function*(){Object.entries(H()).forEach((([t,i])=>{var o;return i.checked=null!==(o=e[t])&&void 0!==o&&o}))})),O=()=>{const e=Object.fromEntries(Object.entries(H()).map((([e,t])=>[e,t.checked])));return L({type:"updated",settings:e}),S(e)};document.addEventListener("DOMContentLoaded",(()=>E(void 0,void 0,void 0,(function*(){const{settings:e,clearHistory:t}=b();t.addEventListener("click",(()=>{L({type:"clear"}),x()}));const i=yield E(void 0,void 0,void 0,(function*(){const e=yield k.get(T,M);return Object.assign(Object.assign({},M),e)}));return I(i),Object.values(e).forEach((e=>e.addEventListener("change",O))),{showMissingBackdrops:i["filter-movies-backdrop"],showMissingPosters:i["filter-movies-posters"],showSpoilers:i["filter-movies-spoilers"],updateFrequency:i["frequency-daily"]?"daily":"refresh"}}))),{once:!0,passive:!0})})();